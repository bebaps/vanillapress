"use strict";var posts=[{id:1,date:"2016-01-09T22:05:09",modified:"2016-01-09T22:05:09",slug:"hello-world",type:"posts",title:"Hello world!",content:"Welcome to WordPress. This is your first post. Edit or delete it, then start writing!"},{id:2,date:"2016-01-10T22:05:09",modified:"2016-01-10T22:05:09",slug:"learning-javascript",type:"posts",title:"Learning JavaScript!",content:"I'm learning JavaScript and super excited!!!"},{id:3,date:"2016-01-11T22:05:09",modified:"2016-01-11T22:05:09",slug:"rest-api",type:"posts",title:"The REST API!",content:"I've started working with the REST API in WordPress, what fun!"},{id:4,date:"2016-01-12T22:05:09",modified:"2016-01-12T22:05:09",slug:"json-data",type:"posts",title:"JSON Data!",content:"So, with the REST API it is posible to pull in WordPress data as pure JSON.  Now I'm figuring out what to do with the data"},{id:5,date:"2016-01-13T22:05:09",modified:"2016-01-13T22:05:09",slug:"javascript-project",type:"posts",title:"JavaScript Project",content:"Some more sample content to work with"}],pages=[{id:6,date:"2016-01-18T22:05:09",modified:"2016-01-18T22:05:09",slug:"home",type:"page",title:"Home",content:"Welcome to VanillaPress, my JavaScript site!"},{id:7,date:"2016-01-18T22:05:09",modified:"2016-01-18T22:05:09",slug:"about",type:"page",title:"About",content:"A little about me!"},{id:8,date:"2016-01-18T22:05:09",modified:"2016-01-18T22:05:09",slug:"blog",type:"page",title:"Blog",content:"Please enjoy my posts"},{id:9,date:"2016-01-18T22:05:09",modified:"2016-01-18T22:05:09",slug:"contact",type:"page",title:"Contact",content:"Drop me a line with any questions :)"}],settings={openEditor:"true"},data={posts:posts,pages:pages,settings:settings},helpers={};helpers.createMenuItem=function(e){var t=document.createElement("li");return t.appendChild(helpers.createLink(e)),t},helpers.createLink=function(e){var t=document.createElement("a"),n=document.createTextNode(e.title);return"home"===e.slug?t.href="#":t.href="#"+e.slug,t.appendChild(n),t},helpers.getMenu=function(){return document.querySelector("#mainNav ul")},helpers.getPageTitle=function(){return document.getElementById("pageTitle")},helpers.getLinks=function(){return document.querySelectorAll("a")},helpers.getContentContainer=function(){return document.getElementById("pageContent")},helpers.getEditorEl=function(){return document.getElementById("editor")},helpers.getEditorToggle=function(){return document.getElementById("editorToggle")},helpers.getEditorToggleLink=function(){return document.querySelector("#editorToggle a")},helpers.getEditorTitleEl=function(){return document.getElementById("editTitle")},helpers.getEditorContentEl=function(){return document.getElementById("editContent")},helpers.getEditorUpdate=function(){return document.getElementById("editUpdateBtn")};var model={};model.init=function(){model.checkLocalStorage()||model.setLocalStorage(data)},model.getContent=function(e){var t=model.getPost(e);return null===t&&(t=model.getPage(e)),null===t&&(t={title:"404 Error",content:"Content not found"}),t},model.getCurrentContent=function(){var e=router.getSlug(),t=model.getContent(e);return t},model.getPosts=function(){return model.getLocalStorage().posts},model.getPost=function(e){for(var t=model.getLocalStorage().posts,n=0;n<t.length;n++)if(e===t[n].slug)return t[n];return null},model.getPages=function(){return model.getLocalStorage().pages},model.getPage=function(e){var t=model.getLocalStorage().pages;null===e&&(e="home");for(var n=0;n<t.length;n++)if(e===t[n].slug)return t[n];return null},model.updateContent=function(e){var t=model.getLocalStorage(),n=new Date;"post"===e.type&&t.posts.forEach(function(t){e.id===t.id&&(t.title=e.title,t.content=e.content,t.modified=n.toISOString())}),"page"===e.type&&t.pages.forEach(function(t){e.id===t.id&&(t.title=e.title,t.content=e.content,t.modified=n.toISOString())}),model.setLocalStorage(t)},model.updateEditorSettings=function(e){var t=model.getLocalStorage();t.settings.openEditor=e,model.setLocalStorage(t)},model.getEditorSettings=function(){var e=model.getLocalStorage();return e.settings.openEditor},model.checkLocalStorage=function(){var e=model.getLocalStorage();return null!==e},model.getLocalStorage=function(){return JSON.parse(localStorage.getItem("vanillaPress"))},model.setLocalStorage=function(e){localStorage.setItem("vanillaPress",JSON.stringify(e))},model.deleteLocalStorage=function(){localStorage.removeItem("vanillaPress")};var router={};router.init=function(){router.loadContent(),router.listenForChanges()},router.getSlug=function(){var e=window.location.hash;return""===e?null:e.substr(1)},router.listenForChanges=function(){window.addEventListener("hashchange",router.loadContent,!1)},router.loadContent=function(){var e=router.getSlug(),t=model.getContent(e),n=helpers.getEditorEl();view.clearContent(),null===e?view.loadSingle("home"):"blog"===e?view.loadBlogPosts():view.loadSingle(e),editor.currentContent=t,!1===n.classList.contains("hidden")&&editor.loadEditorForm(editor.currentContent)};var view={};view.init=function(){view.createMenu()},view.loadBlogPosts=function(){for(var e=model.getPosts(),t=document.createDocumentFragment(),n=helpers.getPageTitle(),o=helpers.getContentContainer(),r=0;r<e.length;r++)t.appendChild(view.createPostMarkup(e[r]));o.appendChild(t),n.innerHTML="Blog Posts"},view.loadSingle=function(e){var t=model.getContent(e),n=helpers.getPageTitle(),o=helpers.getContentContainer();n.innerHTML=t.title,o.innerHTML=t.content},view.updateTitleAndContent=function(e){view.updateTitle(e.title),view.updateContent(e.content)},view.updateTitle=function(e){var t=helpers.getPageTitle();t.innerHTML=e},view.updateContent=function(e){var t=helpers.getContentContainer();t.innerHTML=e},view.clearContent=function(){var e=helpers.getPageTitle(),t=helpers.getContentContainer();e.innerHTML="",t.innerHTML=""},view.createMenu=function(){for(var e=model.getPages(),t=document.createDocumentFragment(),n=helpers.getMenu(),o=0;o<e.length;o++)t.appendChild(helpers.createMenuItem(e[o]));n.appendChild(t)},view.createPostMarkup=function(e){var t=document.createElement("article"),n=document.createElement("h2"),o=helpers.createLink(e),r=document.createElement("div");return n.appendChild(o),r.appendChild(document.createTextNode(e.content)),t.appendChild(n),t.appendChild(r),t};var editor={};editor.currentContent="",editor.unsavedContent=!1,editor.init=function(){editor.listener(),editor.getEditorState()},editor.saveContent=function(){event.preventDefault(),model.updateContent(editor.currentContent),editor.unsavedContent=!1,editor.animateSaveButton()},editor.updateTitle=function(){var e=helpers.getEditorTitleEl().value;editor.currentContent.title=e,editor.unsavedContent=!0,view.updateTitle(e)},editor.updateContent=function(){var e=helpers.getEditorContentEl().value;editor.currentContent.content=e,editor.unsavedContent=!0,view.updateContent(e)},editor.loadEditorForm=function(e){var t=helpers.getEditorTitleEl(),n=helpers.getEditorContentEl();t.value=e.title,n.value=e.content,"blog"===e.slug?n.setAttribute("readonly","readonly"):n.removeAttribute("readonly"),editor.addFormListeners()},editor.animateSaveButton=function(){var e=helpers.getEditorUpdate(),t=function(){setTimeout(function(){e.innerText="Update"},1e3)},n=function(){setTimeout(function(){e.innerText="Saved!",t()},900)};e.innerText="Saving...",n()},editor.addFormListeners=function(){var e=helpers.getEditorTitleEl(),t=helpers.getEditorContentEl(),n=helpers.getEditorUpdate(),o=helpers.getLinks();e.addEventListener("input",editor.updateTitle,!1),t.addEventListener("input",editor.updateContent,!1),n.addEventListener("click",editor.saveContent,!1),o.forEach(function(e){e.addEventListener("click",editor.protectUnsavedContent,!1)})},editor.protectUnsavedContent=function(){if(!0===editor.unsavedContent){var e=window.confirm("You should save your changes first!");!1===e?event.preventDefault():editor.unsavedContent=!1}},editor.listener=function(){var e=helpers.getEditorToggle();e.addEventListener("click",function(){editor.toggle(),event.preventDefault()},!1)},editor.getEditorState=function(){var e=model.getEditorSettings();!1===e&&editor.toggle()},editor.toggle=function(){var e=helpers.getEditorEl(),t=helpers.getEditorToggle(),n=helpers.getLinks();editor.currentContent=model.getCurrentContent(),e.classList.toggle("hidden"),t.classList.toggle("hidden"),!1===t.classList.contains("hidden")?(editor.loadEditorForm(editor.currentContent),model.updateEditorSettings(!1)):(model.updateEditorSettings(!0),n.forEach(function(e){e.removeEventListener("click",editor.protectUnsavedContent,!1)}))};var vanillaPress={};vanillaPress.init=function(){model.init(),router.init(),view.init(),editor.init()},vanillaPress.init();
//# sourceMappingURL=main.min.js.map
